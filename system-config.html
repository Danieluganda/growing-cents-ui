<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>System Configurations â€“ Growing Cents</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Marcellus&display=swap" rel="stylesheet" />
<style>
  :root {
    --bg-dark: #103125;
    --accent-gold: #C39E3D;
    --light-text: #ffffff;
    --card-bg: #fefefe;
    --text-dark: #2c3e50;
    --input-border: #ccc;
    --input-focus: var(--accent-gold);
  }
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: var(--bg-dark);
    color: var(--light-text);
    display: flex;
    min-height: 100vh;
  }
  nav.sidebar {
    width: 260px;
    background: var(--bg-dark);
    padding-top: 20px;
    flex-shrink: 0;
    overflow-y: auto;
    box-shadow: 2px 0 8px rgba(0,0,0,0.3);
    height: 100vh;
  }
  main.content {
    flex-grow: 1;
    padding: 40px 50px;
    background: var(--card-bg);
    color: var(--text-dark);
    overflow-y: auto;
    max-width: 900px;
    margin: 0 auto;
  }
  header {
    margin-bottom: 30px;
  }
  header h1 {
    font-family: 'Marcellus', serif;
    color: var(--accent-gold);
    font-size: 2rem;
    margin-bottom: 0.3em;
  }
  header p {
    font-size: 1.1rem;
    color: #666;
    margin-top: 0;
  }
  form {
    display: flex;
    flex-direction: column;
    gap: 25px;
  }
  .card {
    background: var(--card-bg);
    border-radius: 12px;
    padding: 25px 30px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
  }
  label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--text-dark);
    cursor: pointer;
  }
  input[type="text"], textarea, select {
    width: 100%;
    padding: 10px 14px;
    font-size: 1rem;
    border: 1.5px solid var(--input-border);
    border-radius: 8px;
    font-family: inherit;
    transition: border-color 0.3s ease;
  }
  textarea {
    resize: vertical;
    min-height: 80px;
  }
  input[type="text"]:focus, textarea:focus, select:focus {
    border-color: var(--input-focus);
    outline: none;
  }
  .checkbox-label {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-dark);
    font-weight: 600;
    cursor: pointer;
    margin-bottom: 15px;
  }
  .checkbox-label input[type="checkbox"] {
    width: auto;
    margin: 0;
    cursor: pointer;
  }
  button {
    align-self: flex-start;
    background-color: var(--accent-gold);
    color: var(--bg-dark);
    border: none;
    padding: 14px 30px;
    font-weight: 700;
    font-size: 1.2rem;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.25s ease;
  }
  button:hover {
    background-color: #a57f21;
  }
  .info-text {
    font-size: 0.9rem;
    color: #555;
    margin-top: 6px;
  }
  @media (max-width: 920px) {
    main.content {
      padding: 20px;
      max-width: 100%;
    }
    nav.sidebar {
      width: 100%;
      height: auto;
      padding: 10px;
      border-bottom: 1px solid #ccc;
    }
  }
</style>
</head>
<body>

<nav class="sidebar" id="sidebar-container">
  <!-- admin-menu.html loads here -->
</nav>

<main class="content">
  <header>
    <h1>System Configurations</h1>
    <p>Configure system-wide settings including site info, maintenance, integrations, and security.</p>
  </header>

  <form id="system-config-form" novalidate>
    <section class="card">
      <label for="site-name">Site Name</label>
      <input type="text" id="site-name" name="siteName" placeholder="Growing Cents" required />

      <label for="site-description">Site Description</label>
      <textarea id="site-description" name="siteDescription" placeholder="Enter a brief description of your platform"></textarea>

      <label for="default-language">Default Language</label>
      <select id="default-language" name="defaultLanguage" required>
        <option value="en" selected>English</option>
        <option value="fr">French</option>
        <option value="es">Spanish</option>
        <option value="sw">Swahili</option>
        <option value="zh">Chinese</option>
      </select>

      <label for="timezone">Time Zone</label>
      <select id="timezone" name="timezone" required>
        <!-- Common timezones -->
        <option value="UTC" selected>UTC</option>
        <option value="Africa/Nairobi">Africa/Nairobi</option>
        <option value="America/New_York">America/New_York</option>
        <option value="Europe/London">Europe/London</option>
        <option value="Asia/Dubai">Asia/Dubai</option>
        <option value="Asia/Kolkata">Asia/Kolkata</option>
        <option value="Australia/Sydney">Australia/Sydney</option>
      </select>

      <label for="datetime-format">Date / Time Format</label>
      <select id="datetime-format" name="datetimeFormat" required>
        <option value="YYYY-MM-DD HH:mm" selected>2025-07-17 14:00 (24-hour)</option>
        <option value="MM/DD/YYYY hh:mm A">07/17/2025 02:00 PM (12-hour)</option>
        <option value="DD-MM-YYYY HH:mm">17-07-2025 14:00 (24-hour)</option>
        <option value="DD/MM/YYYY hh:mm A">17/07/2025 02:00 PM (12-hour)</option>
      </select>
    </section>

    <section class="card">
      <label class="checkbox-label" for="maintenance-mode">
        <input type="checkbox" id="maintenance-mode" name="maintenanceMode" />
        Enable Maintenance Mode
      </label>

      <label for="maintenance-message">Maintenance Message</label>
      <textarea id="maintenance-message" name="maintenanceMessage" placeholder="Message shown to users during maintenance" disabled></textarea>

      <label for="api-keys">API Keys / Integration Tokens</label>
      <textarea id="api-keys" name="apiKeys" placeholder="Paste your API keys here for integrations (payment gateways, analytics, etc.)"></textarea>
    </section>

    <section class="card">
      <label for="logging-level">Logging Level</label>
      <select id="logging-level" name="loggingLevel" required>
        <option value="error" selected>Error Only</option>
        <option value="warning">Warning</option>
        <option value="info">Info</option>
        <option value="debug">Debug (Verbose)</option>
      </select>

      <label for="backup-schedule">Backup Schedule</label>
      <select id="backup-schedule" name="backupSchedule" required>
        <option value="daily">Daily</option>
        <option value="weekly" selected>Weekly</option>
        <option value="monthly">Monthly</option>
        <option value="manual">Manual Only</option>
      </select>
    </section>

    <section class="card">
      <label class="checkbox-label" for="ip-whitelist-enabled">
        <input type="checkbox" id="ip-whitelist-enabled" name="ipWhitelistEnabled" />
        Enable IP Whitelisting
      </label>

      <label for="ip-whitelist">IP Whitelist (one IP per line)</label>
      <textarea id="ip-whitelist" name="ipWhitelist" placeholder="e.g. 192.168.0.1&#10;10.0.0.2" disabled></textarea>

      <p class="info-text">Only IP addresses in this list will be allowed access when enabled.</p>
    </section>

    <button type="submit">Save System Configurations</button>
  </form>
</main>

<script>
  // Load sidebar menu
  fetch('admin-menu.html')
    .then(res => res.text())
    .then(html => {
      document.getElementById('sidebar-container').innerHTML = html;
      document.querySelectorAll('.menu-toggle').forEach(btn => {
        btn.addEventListener('click', () => {
          const submenu = btn.nextElementSibling;
          submenu.classList.toggle('show');
        });
      });
    })
    .catch(err => console.error('Failed to load menu:', err));

  const form = document.getElementById('system-config-form');
  const maintenanceCheckbox = form.elements['maintenanceMode'];
  const maintenanceMsg = form.elements['maintenanceMessage'];

  const ipWhitelistCheckbox = form.elements['ipWhitelistEnabled'];
  const ipWhitelistTextarea = form.elements['ipWhitelist'];

  maintenanceCheckbox.addEventListener('change', () => {
    maintenanceMsg.disabled = !maintenanceCheckbox.checked;
    if (!maintenanceCheckbox.checked) {
      maintenanceMsg.value = '';
    }
  });

  ipWhitelistCheckbox.addEventListener('change', () => {
    ipWhitelistTextarea.disabled = !ipWhitelistCheckbox.checked;
    if (!ipWhitelistCheckbox.checked) {
      ipWhitelistTextarea.value = '';
    }
  });

  // Load saved settings
  function loadSettings() {
    const saved = JSON.parse(localStorage.getItem('systemConfig')) || {};

    if(saved.siteName) form.elements['siteName'].value = saved.siteName;
    if(saved.siteDescription) form.elements['siteDescription'].value = saved.siteDescription;
    if(saved.defaultLanguage) form.elements['defaultLanguage'].value = saved.defaultLanguage;
    if(saved.timezone) form.elements['timezone'].value = saved.timezone;
    if(saved.datetimeFormat) form.elements['datetimeFormat'].value = saved.datetimeFormat;
    if(saved.maintenanceMode !== undefined) {
      maintenanceCheckbox.checked = saved.maintenanceMode;
      maintenanceMsg.disabled = !saved.maintenanceMode;
    }
    if(saved.maintenanceMessage) form.elements['maintenanceMessage'].value = saved.maintenanceMessage;
    if(saved.apiKeys) form.elements['apiKeys'].value = saved.apiKeys;
    if(saved.loggingLevel) form.elements['loggingLevel'].value = saved.loggingLevel;
    if(saved.backupSchedule) form.elements['backupSchedule'].value = saved.backupSchedule;
    if(saved.ipWhitelistEnabled !== undefined) {
      ipWhitelistCheckbox.checked = saved.ipWhitelistEnabled;
      ipWhitelistTextarea.disabled = !saved.ipWhitelistEnabled;
    }
    if(saved.ipWhitelist) form.elements['ipWhitelist'].value = saved.ipWhitelist;
  }

  form.addEventListener('submit', e => {
    e.preventDefault();

    const data = {
      siteName: form.elements['siteName'].value.trim(),
      siteDescription: form.elements['siteDescription'].value.trim(),
      defaultLanguage: form.elements['defaultLanguage'].value,
      timezone: form.elements['timezone'].value,
      datetimeFormat: form.elements['datetimeFormat'].value,
      maintenanceMode: maintenanceCheckbox.checked,
      maintenanceMessage: form.elements['maintenanceMessage'].value.trim(),
      apiKeys: form.elements['apiKeys'].value.trim(),
      loggingLevel: form.elements['loggingLevel'].value,
      backupSchedule: form.elements['backupSchedule'].value,
      ipWhitelistEnabled: ipWhitelistCheckbox.checked,
      ipWhitelist: ipWhitelistTextarea.value.trim(),
    };

    localStorage.setItem('systemConfig', JSON.stringify(data));
    alert('System configurations saved successfully!');
  });

  loadSettings();
</script>

</body>
</html>
